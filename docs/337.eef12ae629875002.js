"use strict";(self.webpackChunkfour3rds_ng=self.webpackChunkfour3rds_ng||[]).push([[337],{9337:(K,_,r)=>{r.r(_),r.d(_,{LinksModule:()=>W});var m=r(9808),D=r(7345),L=r(1083);class b extends class y{constructor(o){this.id=o}}{constructor(o,e,i,a){super(o),this.category=e,this.text=i,this.url=a}}var s=r(8966),t=r(5e3),q=r(1135),u=r(8306);class c{static readLocalStorage(o){if(!o||0==o.trim().length)return[];const e=localStorage.getItem(o.trim());return null!=e?JSON.parse(e):[]}static updateLocalStorage(o,e){return!(!o||0==o.trim().length||!e||(e.length>0?localStorage.setItem(o.trim(),JSON.stringify(e)):localStorage.removeItem(o.trim()),0))}static create(o,e){return new u.y(i=>{if(o&&o.trim().length>0&&e){e.id=crypto.randomUUID();const a=c.readLocalStorage(o.trim());a.push(e),c.updateLocalStorage(o.trim(),a),i.next(e.id)}i.complete()})}static delete(o,e){return new u.y(i=>{if(o&&o.trim().length>0){let a=!e,l=[];e&&c.readLocalStorage(o.trim()).forEach(g=>{g.id!=e?l.push(g):a=!0}),a&&c.updateLocalStorage(o.trim(),l),i.next(a)}else i.next(!1);i.complete()})}static read(o,e){return new u.y(i=>{o&&o.trim().length>0&&c.readLocalStorage(o.trim()).forEach(l=>{(!e||l.id==e)&&i.next(l)}),i.complete()})}static update(o,e){return new u.y(i=>{if(o&&o.trim().length>0&&e&&e.id){let a=!1,l=[];c.readLocalStorage(o.trim()).forEach(g=>{l.push(g.id!=e.id?g:e),a=a||g.id==e.id}),a&&c.updateLocalStorage(o.trim(),l),i.next(a)}else i.next(!1);i.complete()})}}var p=r(8819);let h=(()=>{class n{constructor(){this.linksSubject=new q.X([])}create(e){return new u.y(i=>c.create(p.ZQ,e).subscribe({next:a=>i.next(a),error:a=>i.error(a),complete:()=>{this.updateLinksSubject(i),i.complete()}}))}delete(e){return new u.y(i=>c.delete(p.ZQ,e).subscribe({next:a=>i.next(a),error:a=>i.error(a),complete:()=>{this.updateLinksSubject(i),i.complete()}}))}getLinks(){if(0==this.linksSubject.getValue().length){const e=[];this.read().subscribe({next:i=>e.push(i),error:i=>this.linksSubject.error(i),complete:()=>{this.linksSubject.next(e)}})}return this.linksSubject}read(e){return new u.y(i=>c.read(p.ZQ,e).subscribe({next:a=>i.next(a),error:a=>i.error(a),complete:()=>i.complete()}))}update(e){return new u.y(i=>c.update(p.ZQ,e).subscribe({next:a=>i.next(a),error:a=>i.error(a),complete:()=>{this.updateLinksSubject(i),i.complete()}}))}updateLinksSubject(e){let i=[];this.read().subscribe({next:a=>i.push(a),error:a=>e.error(a),complete:()=>{this.linksSubject.next(i)}})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var M=r(1271);let S=(()=>{class n{constructor(e){this.snackBar=e}openSnackBar(e){this.snackBar.open(e,"Dismiss",{duration:2e3})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(M.ux))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=r(4106),U=r(7531),k=r(3075),Z=r(7423);let A=(()=>{class n{constructor(e,i,a,l){this.linksService=e,this.snackBarService=i,this.dialogRef=a,this.data=l,this.category=this.data.category,this.id=this.data.id,this.text=this.data.text,this.url=this.data.url}save(){console.log("LinkEditDialogComponent::save::entry");const e=new b(this.id,this.category,this.text,this.url);e.id?this.linksService.update(e).subscribe({next:i=>{this.snackBarService.openSnackBar(this.text+" updated"),this.dialogRef.close()}}):this.linksService.create(e).subscribe({next:i=>{this.id=i,this.snackBarService.openSnackBar(this.text+" created"),this.dialogRef.close()}}),console.log("LinkEditDialogComponent::save::exit")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h),t.Y36(S),t.Y36(s.so),t.Y36(s.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-link-edit-dialog"]],decls:27,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"link-grid"],["appearance","standard"],["matInput","","placeholder","Category","cdkFocusInitial","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Text",3,"ngModel","ngModelChange"],["matInput","","placeholder","URL",3,"ngModel","ngModelChange"],["mat-dialog-actions","",3,"align"],["mat-button","",3,"mat-dialog-close"],["mat-button","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Edit Link"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t.TgZ(4,"mat-form-field",3),t.TgZ(5,"mat-label"),t._uU(6,"Category"),t.qZA(),t.TgZ(7,"input",4),t.NdJ("ngModelChange",function(l){return i.category=l}),t.qZA(),t.TgZ(8,"mat-hint"),t._uU(9,"Select or enter category for link"),t.qZA(),t.qZA(),t.TgZ(10,"mat-form-field",3),t.TgZ(11,"mat-label"),t._uU(12,"Text"),t.qZA(),t.TgZ(13,"input",5),t.NdJ("ngModelChange",function(l){return i.text=l}),t.qZA(),t.TgZ(14,"mat-hint"),t._uU(15,"Enter text to display for link"),t.qZA(),t.qZA(),t.TgZ(16,"mat-form-field",3),t.TgZ(17,"mat-label"),t._uU(18,"URL"),t.qZA(),t.TgZ(19,"input",6),t.NdJ("ngModelChange",function(l){return i.url=l}),t.qZA(),t.TgZ(20,"mat-hint"),t._uU(21,"Enter link"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",7),t.TgZ(23,"button",8),t._uU(24,"Cancel"),t.qZA(),t.TgZ(25,"button",9),t.NdJ("click",function(){return i.save()}),t._uU(26,"OK"),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.Q6J("ngModel",i.category),t.xp6(6),t.Q6J("ngModel",i.text),t.xp6(6),t.Q6J("ngModel",i.url),t.xp6(3),t.Q6J("align","end"))},directives:[s.uh,s.xY,f.KE,f.hX,U.Nt,k.Fj,k.JJ,k.On,f.bx,s.H8,Z.lW,s.ZT],styles:[".link-grid[_ngcontent-%COMP%]{display:grid;grid-template:max-content max-content max-content max-content/80%}"]}),n})();var d=r(4999),T=r(2525),v=r(8326);function J(n,o){1&n&&t._UZ(0,"th",15)}function Y(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",16),t.TgZ(1,"button",17),t.TgZ(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA(),t.qZA(),t.TgZ(4,"mat-menu",null,18),t.TgZ(6,"button",19),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).edit(l)}),t.TgZ(7,"mat-icon"),t._uU(8,"edit"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Edit"),t.qZA(),t.qZA(),t.TgZ(11,"button",19),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).delete(l)}),t.TgZ(12,"mat-icon"),t._uU(13,"delete"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"Delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",e)}}function N(n,o){1&n&&(t.TgZ(0,"th",15),t._uU(1,"Category"),t.qZA())}function O(n,o){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.category)}}function w(n,o){1&n&&(t.TgZ(0,"th",15),t._uU(1,"Link Text"),t.qZA())}function E(n,o){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.text)}}function Q(n,o){1&n&&(t.TgZ(0,"th",15),t._uU(1,"URL"),t.qZA())}function B(n,o){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.url)}}function z(n,o){1&n&&t._UZ(0,"tr",20)}function F(n,o){1&n&&t._UZ(0,"tr",21)}function I(n,o){if(1&n&&(t.TgZ(0,"table",6),t.ynx(1,7),t.YNc(2,J,1,0,"th",8),t.YNc(3,Y,16,1,"td",9),t.BQk(),t.ynx(4,10),t.YNc(5,N,2,0,"th",8),t.YNc(6,O,2,1,"td",9),t.BQk(),t.ynx(7,11),t.YNc(8,w,2,0,"th",8),t.YNc(9,E,2,1,"td",9),t.BQk(),t.ynx(10,12),t.YNc(11,Q,2,0,"th",8),t.YNc(12,B,2,1,"td",9),t.BQk(),t.YNc(13,z,1,0,"tr",13),t.YNc(14,F,1,0,"tr",14),t.qZA()),2&n){const e=t.oxw();t.Q6J("dataSource",e.links),t.xp6(13),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}let j=(()=>{class n{constructor(e,i,a){this.dialog=e,this.linksService=i,this.snackBarService=a,this.displayedColumns=["operations","category","text","url"],this.links=[]}add(){this.dialog.open(A,{data:new b("","","","")})}delete(e){console.log("LinksTableDialogComponent::delete::"+e.id),this.linksService.delete(e.id).subscribe({next:i=>this.snackBarService.openSnackBar(e.text+" deleted")})}edit(e){console.log("LinksTableDialogComponent::edit::"+e.id),this.dialog.open(A,{data:e}),console.log("LinksTableDialogComponent::edit::exit")}ngOnDestroy(){this.linksSubscription&&this.linksSubscription.unsubscribe()}ngOnInit(){this.linksSubscription=this.linksService.getLinks().subscribe({next:e=>this.links=e.sort((i,a)=>0!=i.category.localeCompare(a.category)?i.category.localeCompare(a.category):i.text.localeCompare(a.text))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.uw),t.Y36(h),t.Y36(S))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-links-table-dialog"]],decls:9,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],["mat-dialog-actions","",3,"align"],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","operations"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","text"],["matColumnDef","url"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","aria-label","Edit/Delete Link",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Links"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,I,15,4,"table",2),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"button",4),t.NdJ("click",function(){return i.add()}),t._uU(6,"Add"),t.qZA(),t.TgZ(7,"button",5),t._uU(8,"Close"),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",i.links.length>0),t.xp6(1),t.Q6J("align","end"))},directives:[s.uh,s.xY,m.O5,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,Z.lW,T.p6,v.Hw,T.VK,T.OP,d.as,d.XQ,d.nj,d.Gk,s.H8,s.ZT],styles:[".mat-column-text[_ngcontent-%COMP%], .mat-column-url[_ngcontent-%COMP%]{padding-left:10px}"]}),n})();var x=r(9224);function R(n,o){if(1&n&&(t.TgZ(0,"p"),t.TgZ(1,"a",6),t._uU(2),t.qZA(),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.s9C("href",e.url,t.LSH),t.xp6(1),t.Oqu(e.text)}}function H(n,o){if(1&n&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2),t.qZA(),t.TgZ(3,"mat-card-content"),t.YNc(4,R,3,2,"p",5),t.qZA(),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e),t.xp6(2),t.Q6J("ngForOf",i.getCategorizedLinks(e))}}function $(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,H,5,2,"mat-card",5),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.getCategories())}}const P=[{path:"",component:(()=>{class n{constructor(e,i){this.dialog=e,this.linksService=i,this.categorizedLinks=new Map,this.refreshing=!0}refreshLinks(e){console.log("LinksComponent::refreshLinks"),console.log(e),this.refreshing=!0,this.categorizedLinks.clear(),e.forEach(i=>{console.log("link =>"+i),this.categorizedLinks.has(i.category)?(this.categorizedLinks.get(i.category).push(i),console.log("Link added to existing array")):(this.categorizedLinks.set(i.category,[i]),console.log("New array created for link"))}),console.log(this.categorizedLinks),this.refreshing=!1}getCategories(){return console.log("LinksComponent::getCategories"),Array.from(this.categorizedLinks.keys()).sort()}getCategorizedLinks(e){return console.log("LinksComponent::getCategorizedLinks::"+e),this.categorizedLinks.get(e).sort((i,a)=>i.text.localeCompare(a.text))}ngOnDestroy(){this.linksSubscription&&this.linksSubscription.unsubscribe()}ngOnInit(){this.linksSubscription=this.linksService.getLinks().subscribe({next:e=>this.refreshLinks(e)})}edit(){this.dialog.open(j)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.uw),t.Y36(h))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-links"]],decls:7,vars:1,consts:[[4,"ngIf"],[1,"ribbon"],[1,"spacer"],[1,"button-container"],["mat-mini-fab","","color","primary",3,"click"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"]],template:function(e,i){1&e&&(t.YNc(0,$,2,1,"div",0),t.TgZ(1,"div",1),t._UZ(2,"span",2),t.TgZ(3,"div",3),t.TgZ(4,"button",4),t.NdJ("click",function(){return i.edit()}),t.TgZ(5,"mat-icon"),t._uU(6,"edit"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&t.Q6J("ngIf",!i.refreshing)},directives:[m.O5,m.sg,x.a8,x.n5,x.dn,Z.lW,v.Hw],styles:[".edit-button[_ngcontent-%COMP%]{position:fixed;right:8px;bottom:56px}mat-card[_ngcontent-%COMP%]{margin-bottom:10px}"]}),n})()}];let X=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[L.Bz.forChild(P)],L.Bz]}),n})(),W=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,X,D.q]]}),n})()}}]);